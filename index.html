<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="./assets/css/style.css">
</head>

<body>

    <section class="main-section p-sm-0 p-3">
        <div class="container">
            <div class="text-center py-5">
                <h1 class="app-title">Weather</h1>
            </div>
            <div class="row justify-content-center">
                <div class="col-xl-6 col-lg-8">
                    <div class="input-group mb-3">
                        <input type="text" id="ctName" class="form-control search-input" placeholder="Enter City Name">
                        <button class="btn search-btn" id="getBtn" type="button">
                            Search
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="container" id="content-container">

        </div>
    </section>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const KEY = "6a2db57b0667ce2e443e537996547492";
        const WEATHER_API = "https://api.openweathermap.org/data/2.5/weather";

        async function getWeather() {
            let ctName = document.getElementById("ctName").value.toLowerCase();

            try {
                const res = await fetch(`${WEATHER_API}?q=${ctName}&appid=${KEY}&units=metric`);
                if (res.status === 404) {
                    throw new Error("City not found or data unavailable");
                    return;
                }

                const data = await res.json();
                document.getElementById("content-container").innerHTML = `
                    <div class="row justify-content-center">
                        <div class="col-xl-6 col-lg-8">
                            <div class="weather-card mt-4 mb-5 text-center">
                                <h3 class="city-title">${data.name}, ${data.sys.country}</h3>
                                <div class="my-4 d-sm-flex align-items-center justify-content-center">
                                    <h2 class="current-temp">${data.main.temp} °C</h2>
                                    <img src="https://openweathermap.org/img/wn/${data.weather[0].icon}@2x.png" alt="weather icon">
                                </div>
                                <h5 class="weather-desc mb-3 text-capitalize">${data.weather[0].description}</h5>
                                <div class="row gy-3">
                                    <div class="col-md-4">
                                        <div class="stat-item p-3">
                                            <h6>Feels Like</h6>
                                            <h6>${data.main.feels_like}°C</h6>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="stat-item p-3">
                                            <h6>Humidity</h6>
                                            <h6>${data.main.humidity}%</h6>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="stat-item p-3">
                                            <h6>Wind Speed</h6>
                                            <h6>${data.wind.speed}m/s</h6>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            } catch (err) {
                document.getElementById("content-container").innerHTML = `
                    <div class="row justify-content-center">
                        <div class="col-xl-6 col-lg-8">
                            <div class="weather-card text-center">
                                <h2 class="error-msg">City Not Found</h2>
                            </div>
                        </div>
                    </div>
                `;
            }
        }

        document.getElementById("getBtn").addEventListener("click", function () {
            getWeather();
        })
    </script>
</body>

</html>